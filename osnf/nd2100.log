!; This CTL file rebuilds the BND file for an EBUS base from scratch.
!; Using ":PARAMETERS NODE=2100"
!; NDxxxx.CMD+NDxxxx.TYM builds the ISIS kernel
!; NDxxxx.C00+NDxxxx.TYM builds the node code (slot 0)
!; NDxxxx.C01+NDxxxx.T01 builds the Engine half of EBUS code (slot 1)
!; (SOURCE)EBUS02.O00 has the 68000 half of EBUS code (slot 2)
!
!DIRECT ND2100.TYM,ND2100.T01,ND2100.CMD,ND2100.C00,ND2100.C01

ND2100  CMD       2  18-AUG-87 1644    ALL RD  NO        43
ND2100  C00       2  18-AUG-87 1639    ALL RD  NO        39
ND2100  TYM       3  13-AUG-87 1256    ALL RD  NO       649
ND2100  C01       2   9-MAY-86 1006    ALL RD  NO        37
ND2100  T01       2   9-MAY-86 1004    ALL RD  NO        69

!
!; The following files in SOURCE are EBUS specific:
!;EBUS02.T00 = example of what is needed in NDxxxx.T01
!;EBUS02.C00 = example of what is needed in NDxxxx.C01
!;EBUS02.I00 = Initialization file
!;EBUS02.R00 = Release code (?STAT=EBUSOM, front-panel display code)
!;EBUS02.O00 = Object code for 68K, MERLIN puts this in slot 2
!;EBUS02.J00 = Source code for EBUS02.O00, for reference only
!
!; Create the ISIS Kernel from NDxxxx.TYM
!R NAD
1.5
;X   ND2100.CMD

;; ISIS-II Version 7.01 Sample Command File
;@   (BETATEST)I2IS07.I01

End of assembly
;@   ND2100.TYM

End of assembly
;@   GOODGY.NQA

End of assembly
;@   (BETATEST)I2IS07.R01

SYNC 1BCE 243A
CLOCKS 243A 257A
IPI 257A 27DA
FLASH 27DA 2C72
KCAREA 2C72 2EDC
TTY 2EDC 3200
KERNEL 3200 7890
DDT 7890 0A400
   3382d bufferlets allocated to dispatcher
DISPAT 0A400 16000
.............................................



    ***  ISIS-II  ***
      Version 7.1d

TYMNET-II Node 2100, Kernel Host 1294
Maximum slot number is 2

       >>> HARDWARE CONFIGURATION <<<

Expects enhanced sync microcode
Expects enhanced async microcode
Expects MAC II
Expects maximum baud rate of 1200
Expects 1 sync board(s)
Expects 1 IPI processor(s)
   IPI device 0 has device address 88

       >>> SLOT CONFIGURATIONS <<<

SLOT 0, NODE CODE, has 225 K-bytes of core, from 16000 to 4E3FF
   2 logical unit(s)
   L.U. 0 is sync line 1
   L.U. 1 is sync line 2

SLOT 1 has 266 K-bytes of core, from 4E400 to 90BFF
   1 logical unit(s)
   L.U. 0 is  IPI device 0

SLOT 2 has 100 K-bytes of core, from 90C00 to 0A9BFF
   no logical units

***Highest location used in this configuration is 0A9C00

Requires 683d k-bytes of core




.............................................

End of assembly
;X   (BETATEST)I2IS07.P01

;; ISIS-II Version 7.01 Patch File

;; (no patches)

1;F   ND2100.NIB

70;T
0,SUMTBL;P
INTLEN,IEND-INTLEN;P
%P
SEGF,SFSIZE;P
%Q
EXIT

!
!; Create the node code for slot 0 from NDxxxx.TYM
!R NAD
1.5
;X   ND2100.C00

;; UPDATED 87/08/18 ND2100 ISIS-II T-II 
;A   (SOURCE)TII05.I10

End of assembly
;A   ND2100.TYM

End of assembly
;A   ISXRAY.GGY

End of assembly
;A   (SOURCE)TII05.R10

End of assembly
;A   (SOURCE)TII05.F10


TYMNET-II Node Code, Version 5.10, ISIS Node

Node: 2100  Kernel Host: 1294

Ports:		Lines:		Links:
   128d Pthru	     2d Sync	     2d TIILNK
     3d Xray	     0d SIO	     0d XLNK
		     2d Total	     2d Total
   256d Disp
     3d Krnl

Maximum number of circuits =  415d 


Bufferlet storage space:

  5AC8x bytes (  23d KB) for  415d circuit buffers ( 56d bytes per circuit)
 0A56Ex bytes ( 42d KB) for  271d history buffers (156d bytes per termination)
 10036x bytes ( 65d KB) for  415d total circuits  (158d bytes per circuit)


Memory used by this configuration = 38400x, 225d KB.

Optimal amount of memory for this configuration =   212d  KB.

End of assembly
;A   (SOURCE)TII05.P10


PATCH added on 841227 at 1100 by GAZEL.
     Starts at DZHS02+22 and is 6x bytes long
	Continues at PATCH1+0 and is 16x bytes long
	Continues at DZHS02+32 and is 4x bytes long
<<< FIX HOST REPORTING PROBLEM >>>

PATCH added on 841116 at 1000 by JIM.
     Starts at ATLNR1+0A and is 4x bytes long
	Continues at KSPEE4+4 and is 4x bytes long
	Continues at XND26+26 and is 4x bytes long
<<< FIX 'MS' LINE SPEED REPORTING >>>

PATCH added on 850926 at 1100 by TONY.
     Starts at GMTCAL and is 6x bytes long
	Continues at PATCH1+1E and is 18x bytes long
	Continues at GMTCA1+0A and is 6x bytes long
	Continues at PATCH1+30 and is 14x bytes long
<<< PATCH FOR GMTCAL ROUTINE >>>

PATCH added on 850913 at 1500 by JIM.
     Starts at NTDSIO and is 6x bytes long
	Continues at PATCH1+3E and is 14x bytes long
<<< FIX SIO BUFFER COUNT ERROR REPORTING >>>

PATCH added on 851106 at 150 by SNILLUKA.
     Starts at TRCS20 and is 0Ax bytes long
<<< FIX XRAY MASKING ALGORITHM FOR TRACE COMMANDS >>>

PATCH added on 851113 at 1400 by JIM.
     Starts at LDRP20+12 and is 4x bytes long
	Continues at LDRP20+1A and is 4x bytes long
	Continues at LDRP40 and is 4x bytes long
<<< FIX LINE DIAGNOSTIC REPORTING >>>

PATCH added on 860421 at 1430 by GAZEL.
     Starts at LEP09R+3A and is 2x bytes long
	Continues at LEP09R+3E and is 2x bytes long
<<< PATCH TO FIX 2E63 CRASH >>>

PATCH added on 870213 at 1240 by GAZEL.
     Starts at XND25 and is 6x bytes long
	Continues at PATCH0+0 and is 4x bytes long
	Continues at PATCH1+52 and is 22x bytes long
<<< FIX 5-DIGIT NEIGHBOR >>>

PATCH added on 870108 at 1400 by JIM.
     Starts at ATTDIE and is 6x bytes long
	Continues at PATCH1+74 and is 3Ax bytes long
<<< FIXES MULTI-LINE RESET PROBLEMS >>>

PATCH added on 861114 at 1500 by ALIN.
     Starts at GETPWR+18 and is 6x bytes long
	Continues at PATCH1+0AE and is 1Ax bytes long
<<< fix XRAY GP command >>>

PATCH added on 861218 at 0900 by JIM.
     Starts at RMKGOB+8 and is 8x bytes long
	Continues at RMKFGB+20 and is 8x bytes long
	Continues at RMKSQF+20 and is 0Ax bytes long
	Continues at RMKFZP+28 and is 8x bytes long
<<< ALLOW VER 5.10 NODES TO HANDLE VER 6.00 NEIGHBORS >>>
End of assembly
1;F   ND2100.N00

;X   (SOURCE)TIII05.WRT

SEG0,RSEG0;P
SEG1,S1SIZE;P
SEGD,SDSIZE;P
SEGF,SFSIZE;P
CTA,CTASIZ;P
%P
%Q
EXIT

!
!; Create the Engine code that runs in Slot 1 from NDxxxx.T01
!R NAD
1.5
;X   ND2100.C01

;;      EBUS INTERFACE COMMAND FILE - SYSTEM #: 34  
;@   (SOURCE)EBUS02.I00

End of assembly
;@   ND2100.T01

End of assembly
;@   (SOURCE)EBUS02.R00

Start.Lib Version 0.05
SEG 2 SIZE = 1100

RING 0E0000 101BA 
CRASH.LIB    11-15-84 AWT
THIS VERSION HAS AN OPTION FOR EXTENDED CRASH PROCESSING.
CRASH 101BA 103B8
STATUS 103B8 105EE
EBUS 105EE 10CA4
DEFAULT AREA PROTECTIONS ASSUMED.

SEGMENT 0-length 388d, requires 200x bytes of core.
SEGMENT 1-length 3364d, requires 0E00x bytes of core.
SEGMENT 2-length 4480d, requires 1200x bytes of core.
SEGMENT 3-length 65536d, requires 10000x bytes of core.
SEGMENT 4-length 65536d, requires 10000x bytes of core.
SEGMENT 5-length 65536d, requires 10000x bytes of core.
SEGMENT 6-length 65536d, requires 10000x bytes of core.
SEGMENT 0E-length 348d, requires 200x bytes of core.
       265d K-bytes of core
End of assembly
1;F   ND2100.N01

CTA,CTASIZ;P
SEG0,S0SIZE;P
SEG1,S1SIZE;P
SEG2,S2SIZE;P
%P
%Q
EXIT

!
!; This is how to create the 68000 code that runs in slot 2
!;; RUN (MPL)ASM68K
!;; EBUS02.LIS/X=(SOURCE)EBUS02.J00
!;; DIFFER EBUS02.SRE,(SOURCE)EBUS02.O00
!
!; Build BND file.  Note that the 68K code is the same in all bases.
!R MERLIN
MERGE AND LINK ISIS SLOTS
VERSION  2.10
* ND2100.BND=ND2100.NIB,ND2100.N00,ND2100.N01,(SOURCE)EBUS02.O00/S




         SLOT MAP

SLOT BEGINS ENDS
 0   16000  4E3FF
 1   4E400  90BFF
 2   90C00  A9BFF




    MAP OF SLOT  0

SEG  BEGINS ENDS
 0   17000  1CFFF
 1   1D000  285FF
 2   28600  2FDFF
 4   2FE00  2FFFF
 6   30000  3FFFF
 7   40000  434FF
11   43500  437FF
12   43800  46EFF
13   46F00  4E3FF
14   16000  16FFF




    MAP OF SLOT  1

SEG  BEGINS ENDS
 0   4E600  4E783
 1   4E800  4F523
 2   4F600  5077F
 3   50800  607FF
 4   60800  707FF
 5   70800  807FF
 6   80800  907FF
14   4E400  4E55B




    MAP OF SLOT  2   (S-RECORD)

BEGINS ENDS
90C00  92EA4

EXIT

!
!DIRECT ND2100.BND

ND2100  BND      65  26-AUG-87  128    ALL RD  NO     32512

!SEND JMS
TYPE LETTER:
; PCOM v1.63 - processed: (OSNF)ND2100.LOG = (OSNF)EBUS.CTL
; Options: DETACH  LOG NOAPPEND SUPERSEDE LICENSE 
; Limits: TIME:60 TRULIMIT:0 
; Status: completed.
; Output recorded in file (OSNF)ND2100.LOG.

mail waiting
!LOGOUT
1162.92 tru
terminal time: 0:05:41
    